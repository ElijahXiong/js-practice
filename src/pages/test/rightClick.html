<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>上传</title>
  </head>

  <body>
    <div>
      <div style="height: 100vh">
        <div style="height: 100vh; width: 500px;overflow-y: scroll" id="content">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum
          vitae velit sit amet velit rhoncus mattis. Etiam placerat ipsum sit
          amet arcu vestibulum ultricies pellentesque urna molestie. Donec
          tincidunt fringilla mi, non aliquet ipsum porttitor eget. Pellentesque
          et lobortis nisi. Nam lectus lectus, molestie nec facilisis
          pellentesque, sollicitudin a neque. Etiam sed tristique eros. Sed ac
          sagittis urna. Etiam elementum lectus sit amet enim aliquam sit amet
          egestas purus tristique. Aliquam lobortis posuere dolor, vitae
          lobortis arcu pharetra ut. Mauris gravida cursus turpis, id placerat
          justo imperdiet quis. Ut fringilla molestie tristique. Vestibulum
          pellentesque nisl vulputate magna viverra fermentum. Integer vulputate
          orci a massa tristique consequat. Sed vestibulum sapien at justo
          venenatis lacinia. Quisque ut massa mi. Quisque pellentesque tincidunt
          dolor a molestie. Suspendisse non arcu aliquam enim vehicula euismod
          et ac neque. Vestibulum quis massa mi, ac mattis turpis. Sed egestas
          nunc eget libero porta sed bibendum diam tristique. Maecenas orci
          quam, adipiscing id ornare dictum, fermentum ac tellus. Quisque luctus
          purus nec est tristique dapibus. Praesent posuere nunc vitae nisl
          accumsan accumsan. Pellentesque nunc quam, blandit et convallis ac,
          gravida sit amet augue. Duis ultricies, libero in pharetra lacinia, mi
          quam porta orci, aliquam hendrerit elit mauris eu ipsum. Suspendisse
          eget tellus vel orci lobortis pretium eget non justo. Mauris interdum
          tortor et sapien aliquet hendrerit. Donec vitae porttitor ligula.
          Nulla convallis, nibh at elementum volutpat, quam ante consequat elit,
          vel adipiscing libero augue id nisi. Quisque mollis neque ut leo
          consequat vel egestas arcu vehicula. Pellentesque in mi vel arcu
          volutpat gravida. Suspendisse sit amet fringilla quam. Proin ut est
          non nunc molestie scelerisque sed at nisl. Nullam pellentesque erat
          sed neque cursus blandit. In ullamcorper sem sed turpis tempor
          consectetur. Quisque quis turpis sapien. Morbi tincidunt porta arcu
          vitae posuere. Duis pretium dictum vulputate. Nam quis elit tortor.
          Vestibulum in mi a ipsum blandit fermentum eget ac neque. Maecenas est
          nisi, imperdiet eget rutrum vitae, suscipit vel dolor. Nunc commodo
          placerat nunc sed varius. Fusce tempus rutrum enim, a gravida nulla
          porta vehicula. Maecenas id purus a diam iaculis egestas. In
          vestibulum, felis a iaculis sollicitudin, purus nisi faucibus metus,
          interdum adipiscing nisi purus placerat nibh. Phasellus eget augue
          quis purus gravida ornare in nec tortor. Curabitur pulvinar imperdiet
          erat eu accumsan. Cras volutpat dolor vel erat placerat dignissim.
          Nulla facilisi. Lorem ipsum dolor sit amet, consectetur adipiscing
          elit. Vestibulum vitae velit sit amet velit rhoncus mattis. Etiam
          placerat ipsum sit amet arcu vestibulum ultricies pellentesque urna
          molestie. Donec tincidunt fringilla mi, non aliquet ipsum porttitor
          eget. Pellentesque et lobortis nisi. Nam lectus lectus, molestie nec
          facilisis pellentesque, sollicitudin a neque. Etiam sed tristique
          eros. Sed ac sagittis urna. Etiam elementum lectus sit amet enim
          aliquam sit amet egestas purus tristique. Aliquam lobortis posuere
          dolor, vitae lobortis arcu pharetra ut. Mauris gravida cursus turpis,
          id placerat justo imperdiet quis. Ut fringilla molestie tristique.
          Vestibulum pellentesque nisl vulputate magna viverra fermentum.
          Integer vulputate orci a massa tristique consequat. Sed vestibulum
          sapien at justo venenatis lacinia. Quisque ut massa mi. Quisque
          pellentesque tincidunt dolor a molestie. Suspendisse non arcu aliquam
          enim vehicula euismod et ac neque. Vestibulum quis massa mi, ac mattis
          turpis. Sed egestas nunc eget libero porta sed bibendum diam
          tristique. Maecenas orci quam, adipiscing id ornare dictum, fermentum
          ac tellus. Quisque luctus purus nec est tristique dapibus. Praesent
          posuere nunc vitae nisl accumsan accumsan. Pellentesque nunc quam,
          blandit et convallis ac, gravida sit amet augue. Duis ultricies,
          libero in pharetra lacinia, mi quam porta orci, aliquam hendrerit elit
          mauris eu ipsum. Suspendisse eget tellus vel orci lobortis pretium
          eget non justo. Mauris interdum tortor et sapien aliquet hendrerit.
          Donec vitae porttitor ligula. Nulla convallis, nibh at elementum
          volutpat, quam ante consequat elit, vel adipiscing libero augue id
          nisi. Quisque mollis neque ut leo consequat vel egestas arcu vehicula.
          Pellentesque in mi vel arcu volutpat gravida. Suspendisse sit amet
          fringilla quam. Proin ut est non nunc molestie scelerisque sed at
          nisl. Nullam pellentesque erat sed neque cursus blandit. In
          ullamcorper sem sed turpis tempor consectetur. Quisque quis turpis
          sapien. Morbi tincidunt porta arcu vitae posuere. Duis pretium dictum
          vulputate. Nam quis elit tortor. Vestibulum in mi a ipsum blandit
          fermentum eget ac neque. Maecenas est nisi, imperdiet eget rutrum
          vitae, suscipit vel dolor. Nunc commodo placerat nunc sed varius.
          Fusce tempus rutrum enim, a gravida nulla porta vehicula. Maecenas id
          purus a diam iaculis egestas. In vestibulum, felis a iaculis
          sollicitudin, purus nisi faucibus metus, interdum adipiscing nisi
          purus placerat nibh. Phasellus eget augue quis purus gravida ornare in
          nec tortor. Curabitur pulvinar imperdiet erat eu accumsan. Cras
          volutpat dolor vel erat placerat dignissim. Nulla facilisi. Lorem
          ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum vitae
          velit sit amet velit rhoncus mattis. Etiam placerat ipsum sit amet
          arcu vestibulum ultricies pellentesque urna molestie. Donec tincidunt
          fringilla mi, non aliquet ipsum porttitor eget. Pellentesque et
          lobortis nisi. Nam lectus lectus, molestie nec facilisis pellentesque,
          sollicitudin a neque. Etiam sed tristique eros. Sed ac sagittis urna.
          Etiam elementum lectus sit amet enim aliquam sit amet egestas purus
          tristique. Aliquam lobortis posuere dolor, vitae lobortis arcu
          pharetra ut. Mauris gravida cursus turpis, id placerat justo imperdiet
          quis. Ut fringilla molestie tristique. Vestibulum pellentesque nisl
          vulputate magna viverra fermentum. Integer vulputate orci a massa
          tristique consequat. Sed vestibulum sapien at justo venenatis lacinia.
          Quisque ut massa mi. Quisque pellentesque tincidunt dolor a molestie.
          Suspendisse non arcu aliquam enim vehicula euismod et ac neque.
          Vestibulum quis massa mi, ac mattis turpis. Sed egestas nunc eget
          libero porta sed bibendum diam tristique. Maecenas orci quam,
          adipiscing id ornare dictum, fermentum ac tellus. Quisque luctus purus
          nec est tristique dapibus. Praesent posuere nunc vitae nisl accumsan
          accumsan. Pellentesque nunc quam, blandit et convallis ac, gravida sit
          amet augue. Duis ultricies, libero in pharetra lacinia, mi quam porta
          orci, aliquam hendrerit elit mauris eu ipsum. Suspendisse eget tellus
          vel orci lobortis pretium eget non justo. Mauris interdum tortor et
          sapien aliquet hendrerit. Donec vitae porttitor ligula. Nulla
          convallis, nibh at elementum volutpat, quam ante consequat elit, vel
          adipiscing libero augue id nisi. Quisque mollis neque ut leo consequat
          vel egestas arcu vehicula. Pellentesque in mi vel arcu volutpat
          gravida. Suspendisse sit amet fringilla quam. Proin ut est non nunc
          molestie scelerisque sed at nisl. Nullam pellentesque erat sed neque
          cursus blandit. In ullamcorper sem sed turpis tempor consectetur.
          Quisque quis turpis sapien. Morbi tincidunt porta arcu vitae posuere.
          Duis pretium dictum vulputate. Nam quis elit tortor. Vestibulum in mi
          a ipsum blandit fermentum eget ac neque. Maecenas est nisi, imperdiet
          eget rutrum vitae, suscipit vel dolor. Nunc commodo placerat nunc sed
          varius. Fusce tempus rutrum enim, a gravida nulla porta vehicula.
          Maecenas id purus a diam iaculis egestas. In vestibulum, felis a
          iaculis sollicitudin, purus nisi faucibus metus, interdum adipiscing
          nisi purus placerat nibh. Phasellus eget augue quis purus gravida
          ornare in nec tortor. Curabitur pulvinar imperdiet erat eu accumsan.
          Cras volutpat dolor vel erat placerat dignissim. Nulla facilisi.
        </div>
      </div>
      <ul class="menu" id="menu">
        <li><span>复制</span></li>
        <li><span>粘贴</span></li>
        <li><span>刷新</span></li>
        <li><span>其他功能1</span></li>
        <li><span>其他功能2</span></li>
      </ul>
    </div>

    <script type="text/javascript">
      const menu = document.getElementById("menu");
      const content = document.getElementById('content')

      console.log('========',content.clientWidth, document.documentElement.clientWidth)
      //获取可视区宽度,高度
      const winWidth = content.clientWidth
      const winHeight = content.clientHeight;
      window.onload = function () {
        // 点击空白区域 隐藏菜单
        document.addEventListener("click", function () {
          menu.style.display = "none";
          menu.style.left = 0 + "px";
          menu.style.top = 0 + "px";
        });

        content.addEventListener("scroll", () => {
          let timer = null;
          if (timer) return;
          timer = setTimeout(() => {
            menu.style.display = "none";
            menu.style.left = 0 + "px";
            menu.style.top = 0 + "px";
            document.body.onmouseover = (event) => {
              let el = event.target; //鼠标每经过一个元素，就把该元素赋值给变量el
              console.log("当前鼠标在", el.parentNode, "元素上"); //在控制台中打印该变量
            };
            timer = null;
          }, 200);
        });
        // 点击菜单
        content.addEventListener("click", function (ele) {
          const e = ele || window.event;
          console.log(e.target.innerText);
        });

        //右键菜单
        content.oncontextmenu = function (ele) {
          const e = ele || window.event;
          menu.style.display = "block";
          // 获取鼠标坐标
          let mouseX = e.clientX;
          let mouseY = e.clientY;
          console.log("mouseX, mouseY", mouseX, mouseY);
          // 判断边界值，防止菜单栏溢出可视窗口
          if (mouseX >= winWidth - menu.offsetWidth) {
            mouseX = mouseX - menu.offsetWidth;
          } else {
            mouseX = mouseX;
          }
          if (mouseY > winHeight - menu.offsetHeight) {
            mouseY =
              mouseY -
              menu.offsetHeight +
              Math.floor(document.documentElement.scrollTop);
          } else {
            mouseY = mouseY + Math.floor(document.documentElement.scrollTop);
          }
          menu.style.left = mouseX + "px";
          menu.style.top = mouseY + "px";
          return false;
        };
      };
    </script>
  </body>

  <style>
    * {
      margin: 0;
      padding: 0;
    }
    .menu {
      width: 100px;
      border: 1px solid #ccc;
      position: absolute;
      box-shadow: 2px 2px 8px 1px rgba(0, 0, 0, 0.2);
      display: none;
      background-color: #fff;
    }
    .menu li {
      list-style: none;
      width: 100%;
    }
    .menu li span {
      display: inline-block;
      text-decoration: none;
      color: #555;
      width: 100%;
      padding: 10px 0;
      text-align: center;
      cursor: pointer;
    }
    .menu li:first-of-type {
      border-radius: 5px 5px 0 0;
    }
    .menu li span:hover {
      background: #eee;
      color: #cc1a1a;
    }
  </style>
</html>
